# $OpenXM: OpenXM/rc/Makefile,v 1.3 2000/01/26 23:14:40 takayama Exp $
CC=gcc
all :  dot.bashrc  dot.cshrc  openxm .done_gen-shell-scripts

dot.bashrc : bashrc repl 
	rm -f dot.bashrc 
	echo "# DO NOT EDIT THIS FILE" >dot.bashrc
	./repl <bashrc >>dot.bashrc

dot.cshrc : cshrc repl
	rm -f dot.cshrc 
	echo "# DO NOT EDIT THIS FILE" >dot.cshrc
	./repl <cshrc >>dot.cshrc

repl : repl.c
	${CC} -static -o repl repl.c

openxm : dot.cshrc
	rm -f openxm
	echo "#!/bin/csh" >openxm
	cat dot.cshrc >>openxm
	echo '$$*' >>openxm
	chmod +x openxm
	cp -f openxm ../bin

.done_gen-shell-scripts : dot.cshrc Makefile gen-shell-scripts
	./gen-shell-scripts
	touch .done_gen-shell-scripts

clean :
	rm -f dot.bashrc dot.cshrc repl openxm asir sm1 gp k0 .gen-shell-scripts

