#$OpenXM: OpenXM/src/asir-contrib/packages/doc/Makefile.in,v 1.17 2009/02/21 22:09:11 ohara Exp $
RM=rm -f

LANGUAGES = en ja

INSTALL=@INSTALL@
INSTALL_SCRIPT=@INSTALL_SCRIPT@

#top_srcdir=@top_srcdir@
bindir=@prefix@/bin
LIBDIR=@prefix@/lib/asir
DOCDIR=@prefix@/doc/asir-contrib
OXREPLACE=${bindir}/oxreplace

SUBDIRS=dsolv gnuplot mathematica ok_diff ok_dmodule om \
   pfpcoh phc plucker sm1 tigers \
   todo_parametrize f_res taji_alc top noro_matrix mt_graph

all :
	@if [ ! -f ./.build_done ] ; then \
		for i in ${SUBDIRS}; do (cd $$i && ${MAKE}); done ; \
	    touch ./.build_done ; \
	fi

install: install-help install-document

install-help: all
	@if [ ! -f ./.install_help_done ] ; then \
		for i in ${SUBDIRS}; do (cd $$i && ${MAKE} install-help); done ; \
	    touch ./.install_help_done ; \
	else \
	    echo "NOTE: Installation of document is already done. Remove .install_help_done for a new installation." ; \
	fi

install-document: all
	@if [ ! -f ./.install_doc_done ] ; then \
		for i in ${SUBDIRS}; do (cd $$i; ${MAKE} install-document); done ; \
		for j in ${LANGUAGES}; do \
			${INSTALL_SCRIPT} top/fix-link.sh ${DOCDIR}/$$j/cman-html ; \
			(cd ${DOCDIR}/$$j/cman-html; sh ./fix-link.sh $$j ${OXREPLACE}) ; \
		done ; \
	    touch ./.install_doc_done ; \
	else \
	    echo "NOTE: Installation of document is already done. Remove .install_document_done for a new installation." ; \
	fi

clean:
	for i in ${SUBDIRS}; do (cd $$i; ${MAKE} clean); done

distclean: clean
	-for j in ${LANGUAGES}; do \
		${RM} -r ${LIBDIR}/help-$$j/xm.help ; \
	done
	-${RM} -r ${DOCDIR}
	-${RM} -r ./.*done config.log config.status autom4te.cache 
	-${RM} Makefile M/Makefile
