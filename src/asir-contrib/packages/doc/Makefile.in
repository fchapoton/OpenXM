#$OpenXM: OpenXM/src/asir-contrib/packages/doc/Makefile.in,v 1.7 2005/04/14 04:40:23 takayama Exp $
RM=rm

INSTALL_doc=@prefix@/doc
INSTALL_lib=@prefix@/lib
OXWEAVE=@prefix@/bin/oxweave
OXGENTEXI=@prefix@/bin/oxgentexi
OXREPLACE=@prefix@/bin/oxreplace

SUBDIRS=dsolv gnuplot mathematica ok_diff ok_dmodule om \
   pfpcoh phc plucker sm1 tigers \
   todo_parametrize top

all :

install : 
	@if [ ! -f ./.install_help_done ] ; then \
	    make install-help ; \
	    touch ./.install_help_done ; \
	else \
	    echo "NOTE: Installation of document is already done. Remove .install_help_done for a new installation." ; \
	fi
install-help: install-help-en install-help-ja
install-document : 
	@if [ ! -f ./.install_document_done ] ; then \
		${RM} -rf ${INSTALL_lib}/asir-contrib ; \
	    make install-html-doc ; \
		make fix-links ; \
	    make install-dvi-ps-pdf-doc ; \
	    touch ./.install_document_done ; \
	else \
	    echo "NOTE: Installation of document is already done. Remove .install_document_done for a new installation." ; \
	fi
install-html-doc: install-html-doc-en install-html-doc-ja 
install-dvi-ps-pdf-doc: install-dvi-ps-pdf-doc-en install-dvi-ps-pdf-doc-ja

install-help-en: 
	-${RM} -rf ${INSTALL_lib}/asir/help-eg/xm.help
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-help-en); done

install-help-ja: 
	-${RM} -rf ${INSTALL_lib}/asir/help-jp/xm.help
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-help-ja); done

install-html-doc-en: 
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-html-en); done

install-html-doc-ja: 
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-html-ja); done

install-dvi-ps-pdf-doc-en: 
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-dvi-ps-pdf-en); done

install-dvi-ps-pdf-doc-ja: 
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' install-dvi-ps-pdf-ja); done

fix-links: fix-links-en fix-links-ja
fix-links-ja:
	cp top/fix-link.sh ${INSTALL_doc}/asir-contrib/ja/cman-html
	(cd ${INSTALL_doc}/asir-contrib/ja/cman-html; sh ./fix-link.sh ja ${OXREPLACE})
fix-links-en:
	cp top/fix-link.sh ${INSTALL_doc}/asir-contrib/en/cman-html
	(cd ${INSTALL_doc}/asir-contrib/en/cman-html; sh ./fix-link.sh en ${OXREPLACE})

clean:
	-${RM} -rf ./.*done config.log config.status autom4te.cache
	for i in ${SUBDIRS}; do (cd $$i; make clean); done
distclean: clean
	-${RM} -rf ${INSTALL_lib}/asir/help-eg/xm.help
	-${RM} -rf ${INSTALL_lib}/asir/help-jp/xm.help
	-${RM} -rf ${INSTALL_doc}/asir-contrib
	-${RM} -rf ${INSTALL_doc}/asir-contrib



# For a test.
gen-help-ja: 
	-for i in ${SUBDIRS}; do (cd $$i; make INSTALL_doc='${INSTALL_doc}' INSTALL_lib='${INSTALL_lib}' OXWEAVE='${OXWEAVE}' OXGENTEXI='${OXGENTEXI}' gen-help-ja); done

