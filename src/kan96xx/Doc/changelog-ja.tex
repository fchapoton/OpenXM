% $OpenXM: OpenXM/src/kan96xx/Doc/changelog-ja.tex,v 1.4 2004/08/31 05:30:20 takayama Exp $
\documentclass{jarticle}
\title{ChangeLog \\ ---kan96xx, kxx, k097}
\author{Nobuki Takayama}
\date{}
\begin{document}
\maketitle


%%OpenXM/doc/Papers/rims-2003-12* に oxshell, polymake

\section{2004-02, port 化}

\begin{enumerate}
\item gmp はネットワークからダウンロードしてインストールするようにする.
{\tt OpenXM\_contrib} はつかわない.
\item {\tt OpenXM/src/gmp/Makefile-ports} 1.1--1.5,
%%Mail/openxm-cvs.inbox 141
\end{enumerate}

\section{2004-02,  memory leak}
\begin{enumerate}
\item {\tt misc-2003/A2/bs-poly/bs2-leak.sm1} 実行時にクライアント構造体
が壊れる.  gmp 4.x によるメモリリークを疑うも, {\tt GC\_malloc} を使うべきところで
{\tt malloc} を用いていたのでメモリが破壊されていたと判明.
{\tt malloc} の中にポインタを入れてはいけない.
\item {\tt OpenXM/src/kan96xx} 以下の各ファイル.
{\tt Kan/kanExport1.c} 1.11,
{\tt Kan/poly3.c} 1.7,
{\tt Kan/shell.c} 1.11,
{\tt plugin/file2.c} 1.9 (原因),
{\tt plugin/oxKan0.h} 1.16,
{\tt plugin/sm1Socket.c} 1.16 (原因).
{\tt OpenXM/src/kxx/oxmain.c} 1.15.
%%Mail/openxm-cvs.inbox 164 2004-2-23
\end{enumerate}

\section{2004-02, 03, ox\_texmacs}
\begin{enumerate}
\item sm1 を基礎として ox\_texmacs を作る.  {\tt -q} option で余計な
メッセージを標準出力へ出さないようにする.  次のファイルを変更.
%%Mail/openxm-cvs.inbox 203, 204, 210, 213, 215, 220, 221, 222
\item {\tt OpenXM/src/util/ox\_pathfinder.c} 1.18--1.19,
{\tt OpenXM/src/util/ox\_pathfinder.h} 1.11,
{\tt OpenXM/src/kxx/ox100start.c} 1.6,
{\tt OpenXM/src/kan96xx/Doc/ox.sm1} 1.34--1.35,
{\tt OpenXM/src/kan96xx/Kan/ext.c} 1.23,
{\tt OpenXM/src/kan96xx/Kan/kanExport0.c} 1.21,
{\tt OpenXM/src/kan96xx/plugin/mytcpio.c} 1.14.
\item {\tt ox\_texmacs}. 
 {\tt OpenXM/src/kxx} 以下の次のファイルを変更.
\item {\tt ox\_texmacs.c} 1.1--1.17,
{\tt sample\_kanlib.c} 1.1,
\item {\tt init-openxm.scm} の作成 (小原).
\end{enumerate}

\section{2004-03, ox 機能の強化}
\begin{enumerate}
\item option つきの関数よびだし.
%%Mail/openxm-cvs.inbox 286, 288  まだ書いてない
\end{enumerate}

\section{2004-07, dhecart (2重同時化による gb)}
\begin{enumerate}
\item h[0,1](D) でのグレブナ fan の計算のための準備.
\item Doc/dhecart.sm1,  dh.gb 
%%Mail/openxm-cvs.inbox ??
\end{enumerate}

\section{2004-08-22, lcm, polylcm, gcd, polygcd, その他}
\begin{enumerate}
\item polylcm, polygcd は ox を用いる.
\item mpzext (lcm, gcd).  int32 は universalNumber (mpz\_int) へ自動変換.
\item ox.sm1 は起動の時から load すべきだがまだやってない.
%%Mail/openxm-cvs.inbox ??
\item \verb@[(exponents) ...] gbext @ で exponents を取り出せる. 始めの版は 8 月頃.
\item {\tt exponents} のformat を変えた. (9/5. cf.gfan.sm1, cone.sm1) \\
{\tt OpenXM/src/kan96xx/Kan/kanExport1.c} 1.16.
\end{enumerate}

\section{2004-08-31, weight ベクトルで univNum を受け取る}
\begin{enumerate}
\item {\tt to\_int32}, {\tt Kto\_int32} で univNum を int32 へ.
\item {\tt to\_int} は {\tt to\_univNum} に同値. どちらかを廃止しよう.
\item 内部関数の変更: {\tt KordWsAll()}, {\tt KsetUpRing()}, {\tt oInitW()}
\item マクロ: {\tt ord\_w}, {\tt weight\_vector}, {\tt s\_weight\_vector},
{\tt w\_to\_vec}, {\tt ecart.weight\_vector}, {\tt ord\_ws\_all}
\item  テスト方法.  cvs-eventail/aux-cone.sm1 の test7 を用いる.
%%Mail/openxm-cvs.inbox ??
\end{enumerate}

\section{2004-09-5, error および ctrl-C でマクロの呼び出し履歴を表示(trace)}
\begin{enumerate}
\item {\tt traceShowStack()} を呼び出すと呼び出し履歴が表示される.
履歴を文字列で戻す.
\item \verb@ ctrlC_hook @ の実行中にエラーをおこすと, ox103\_reset が
よばれ, これが無限ループを生む. これを防止.
\item {\tt executeToken} する前に関数の名前を trace 用のスタック
{\tt TraceNameStack} へ push.
実行がおわれば pop することにより, 履歴表示をコントロール.
\item extension で履歴のクリア, 強制表示ができる.
\item ctrl-C で履歴の表示, クリアをする. これは各 ox server で対処の必要あり.
\item 
{\tt OpenXM/src/kan96xx/Kan/ext.c} 1.24 \\
{\tt OpenXM/src/kan96xx/Kan/kanExport0.c} 1.30 \\
{\tt OpenXM/src/kan96xx/Kan/stackmachine.c} 1.15--1.18  \\
{\tt OpenXM/src/kan96xx/Kan/usage.c} 1.30 \\
{\tt OpenXM/src/k097/ox\_k0.c} 1.6 \\
{\tt OpenXM/src/kxx/ox\_texmacs.c} 1.19 \\
{\tt OpenXM/src/kxx/oxserver00.c} 1.15 \\
{\tt OpenXM/src/kxx/sample\_kanlib.c} 1.2
\end{enumerate}

\section{2004-09-05, EUC等 8-bit の名前を受け付ける}
\begin{enumerate}
\item hash 値の計算方法にバグがあった. hash の値は負ではいけない.
\item {\tt OpenXM/src/kan96xx/Kan/stackmachine.c} 1.17
\end{enumerate}


\section{2004-09-05, グレブナfanの計算}
\begin{enumerate}
\item polymake が必要.  9/1, 9/2, 9/3, 9/4 のノートも参照.
\item OpenXM の cvs への commit は大きい区切りで. 
      細かい変更は {\tt eventail/cone.sm1} で.
\item {\tt OpenXM/src/kan96xx/Doc/gfan.sm1} 1.1
\end{enumerate}

\end{document}