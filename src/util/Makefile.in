# $OpenXM: OpenXM/src/util/Makefile.in,v 1.4 2005/04/04 12:38:32 takayama Exp $
#OpenXM_ROOT=../../../OpenXM
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
libdir=@libdir@
includedir=@includedir@

CC=@CC@
CFLAGS=@CFLAGS@ -D_BSD_SOURCE -D_POSIX_C_SOURCE
RANLIB=@RANLIB@

all : oxweave oxreplace oxgentexi oxgreph libox_pathfinder.a

oxweave : oxweave.o
	${CC} -o $@ oxweave.o

oxreplace : oxreplace.o
	${CC} -o $@ oxreplace.o

oxgentexi : oxgentexi.o
	${CC} -o $@ oxgentexi.o

oxgreph : oxgreph.o
	${CC} -o $@ oxgreph.o

libox_pathfinder.a : ox_pathfinder.o
	ar ru libox_pathfinder.a ox_pathfinder.o
	${RANLIB} libox_pathfinder.a

ox_pathfinder.o : ox_pathfinder.h

test: ox_pathfinder.o test.o
	${CC} -o $@ test.o ox_pathfinder.o -L${libdir} -lgc

install: all
	@if [ ! -f ./.install_done ] ; then \
	echo "Installing oxweave, oxreplace, oxgentexi, oxgreph, libox_pathfinder.a, ox_pathfinder.h oxfetch.sh" ; \
	install -c lndir.sh oxfetch.sh ${bindir} ; \
	install -c -s oxweave oxreplace oxgentexi oxgreph ${bindir} ; \
	install -c -s oxweave ${prefix}/src/kxx ; \
	install -c libox_pathfinder.a ${libdir}  ; \
	install -c ox_pathfinder.h ${includedir} ; \
	touch ./.install_done ; \
	fi

clean:
	rm -f .install_done *.o oxweave oxreplace oxgentexi libox_pathfinder.a test oxgreph
